<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Binary Search Visualizer</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .array-box {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .item {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: lightgray;
      border: 1px solid #999;
      border-radius: 5px;
      transition: all 0.3s;
    }
    .item.left {
      background: #add8e6;
    }
    .item.right {
      background: #f9c2ff;
    }
    .item.mid {
      background: #90ee90;
      font-weight: bold;
    }
    #log {
      white-space: pre-wrap;
      background: #f4f4f4;
      padding: 10px;
      border-radius: 5px;
      margin-top: 15px;
      height: 120px;
      overflow-y: auto;
      font-family: monospace;
    }
    input, button {
      margin: 5px 0;
    }
  </style>
</head>
<body>

  <div style="padding: 20px; background: #f0f0f0; border-bottom: 1px solid #ddd;">
    <a href="index.html" style="
      display: inline-block;
      padding: 8px 16px;
      background-color: #3498db;
      color: white;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
    ">
      â† è¿”å›é¦–é¡µ
    </a>
  </div>	
  
  <h2>ğŸ” äºŒåˆ†æŸ¥æ‰¾å¯è§†åŒ–</h2>

  <label>è¾“å…¥æœ‰åºæ•°ç»„ï¼ˆé€—å·åˆ†éš”ï¼‰:</label><br>
  <input id="arrayInput" type="text" value="1,3,5,7,9,11,13"><br>

  <label>ç›®æ ‡å€¼ target:</label><br>
  <input id="targetInput" type="number" value="7"><br>

  <label>æ­¥éª¤é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰:</label><br>
  <input id="sleepTimeInput" type="number" value="1000"><br>

  <button onclick="startSearch()">å¼€å§‹æœç´¢</button>

  <div class="array-box" id="arrayBox"></div>

  <div><strong>æ­¥éª¤æ—¥å¿—ï¼š</strong></div>
  <div id="log"></div>

  <script>
    let nums = [], target = 0, log = '', step = 0, sleepTime = 1000;

    function logStep(msg) {
      log += msg + "\n";
      document.getElementById('log').innerText = log;
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function startSearch() {
      // åˆå§‹åŒ–
      step = 0;
      log = '';
      document.getElementById('log').innerText = '';

      const arrStr = document.getElementById('arrayInput').value.trim();
      const targetStr = document.getElementById('targetInput').value.trim();
      const sleepStr = document.getElementById('sleepTimeInput').value.trim();

      nums = arrStr.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
      target = parseInt(targetStr);
      sleepTime = parseInt(sleepStr);

      if (!nums.length || isNaN(target)) {
        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°ç»„å’Œç›®æ ‡å€¼ï¼');
        return;
      }

      if (isNaN(sleepTime) || sleepTime < 0) {
        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ sleep æ¯«ç§’å€¼ï¼ˆä¾‹å¦‚ 1000 è¡¨ç¤º 1ç§’ï¼‰');
        return;
      }

      renderArray(-1, -1, -1); // åˆå§‹æ¸²æŸ“

      let left = 0, right = nums.length - 1;
      while (left <= right) {
        const mid = Math.floor((left + right) / 2);
        renderArray(left, right, mid);
        logStep(`Step ${++step}: left=${left}, right=${right}, mid=${mid}, value=${nums[mid]}`);

        await sleep(sleepTime);

        if (nums[mid] === target) {
          logStep(`âœ… æ‰¾åˆ° target=${target}ï¼Œä½ç½®ï¼š${mid}`);
          renderArray(left, right, mid);
          return;
        } else if (nums[mid] < target) {
          left = mid + 1;
        } else {
          right = mid - 1;
        }
      }

      logStep(`âŒ æœªæ‰¾åˆ° target=${target}`);
    }

    function renderArray(left, right, mid) {
      const box = document.getElementById('arrayBox');
      box.innerHTML = '';
      nums.forEach((num, i) => {
        const div = document.createElement('div');
        div.className = 'item';
        if (i === mid) div.classList.add('mid');
        else if (i === left) div.classList.add('left');
        else if (i === right) div.classList.add('right');
        div.innerText = num;
        box.appendChild(div);
      });
    }
  </script>
</body>
</html>
